#!/usr/bin/env php
<?php
if (!defined('DS')) { define('DS', DIRECTORY_SEPARATOR); }

// make sure we never run out of time.
set_time_limit(0);

/**
 *---------------------------------------------------------------
 * Bootstrap
 *---------------------------------------------------------------
 *
 * We need what we need
 */
$queue = require __DIR__ . DS . '..' . DS . 'bootstrap.php';

/**
 *---------------------------------------------------------------
 * Run process manager
 *---------------------------------------------------------------
 *
 * execute queue elements
 */
$pm = new Beryllium\ProcessManager($queue, 'php ' . __DIR__ . '/worker %s');
$pm->work();